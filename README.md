# Ticketmaster API: SDK for Scala [![Build Status](https://travis-ci.org/ticketmaster-api/sdk-scala.svg?branch=master)](https://travis-ci.org/ticketmaster-api/sdk-scala)

For more detailed information about the API and to get your API key head [here](http://developer.ticketmaster.com/). This SDK supports Discovery [v2](http://developer.ticketmaster.com/products-and-docs/apis/discovery/v2/).

## Create API client

```scala
import com.ticketmaster.api.discovery._

val api = Discovery("your-api-key")
```

## Making API calls

API calls are non-blocking so ensure that there is a `scala.concurrent.ExecutionContext` implicitly available.

All take a case class representing the criteria for that call. For example, search events takes a `com.ticketmaster.api.discovery.SearchEventsRequest` on which you can set your criteria.

```scala
import scala.concurrent.ExecutionContext.Implicits.global
import scala.concurrent.Future

import com.ticketmaster.api.discovery.domain._

val criteria = SearchEventsRequest(keyword = "coachella", size = 5)

val pendingResponse: Future[PageResponse[Events]] = api.searchEvents(criteria)
```

See docs for full list of criteria and resources they relate to.

Rate limit details are provided in every response in `com.ticketmaster.api.discovery.RateLimits`. Details include current rate limit per day, time for next rate limit reset, how many calls remain in current time period and how many calls over the rate limit. In addition, search API calls will return a `com.ticketmaster.api.discovery.Page` as part of the result.

## Error handling

This library piggy-backs on `scala.concurrent.Future` semantics for handling errors. Exceptions can be handled in the `recover` combinator.

## Http client

The default http client is [dispatch](https://github.com/dispatch/reboot). It is possible to use a different http client by extending `com.ticketmaster.api.discovery.http.Http` and overriding method `http` in your own instance of `com.ticketmaster.api.discovery.HttpDiscoveryApi`.

## Remaining work

* Expose _links and _embedded for each resource.
* Remove boilerplate code transforming criteria to http request, possibly via Shapeless.

## Wish list

* Allow pluggable json parser. Currently using [argonaut](argonaut.io).
* Turn search results into a stream/iterator.

## Build notes

This `README.md` is generated by [tut](https://github.com/tpolecat/tut). Make changes to `src/main/tut/README.md` and run `sbt tut` to generate this file.
